<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>BTC Close (last 12h)</title>
<style>
  body{font-family:-apple-system,Helvetica,Arial,sans-serif;margin:24px}
  h2{margin:0 0 12px}
  #wrap{max-width:1100px;margin:0 auto}
  canvas{width:100%;height:440px}
  small{color:#666}
</style>
</head>
<body>
  <div id="wrap">
    <h2>BTC/USDT â€” Close (last 12 hours)</h2>
    <small>Data updates when you run the script.</small>
    <canvas id="c"></canvas>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script>
  (function(){
    'use strict';
    // super simple: fetch JSON and plot; category x-axis (no date adapter needed)
    fetch('btc.json?t=' + Date.now(), {cache:'no-store'})
      .then(function(r){ return r.json(); })
      .then(function(rows){
        var labels = rows.map(function(p){ return p.t; });
        var data   = rows.map(function(p){ return p.close; });

        var ctx = document.getElementById('c').getContext('2d');
        new Chart(ctx, {
          type: 'line',
          data: {
            labels: labels,
            datasets: [{
              label: 'BTC/USDT close',
              data: data,
              borderColor: '#1f77b4',
              backgroundColor: '#1f77b4',
              pointRadius: 0,
              tension: 0.25,
              spanGaps: true
            }]
          },
          options: {
            responsive: true,
            scales: {
              x: {ticks: {maxTicksLimit: 25}},   // keep it readable
              y: {beginAtZero: false}
            }
          }
        });
      })
      .catch(function(e){ console.error(e); });
  })();
  </script>
</body>
</html>